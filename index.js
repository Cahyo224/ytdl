const axios = require("axios");
const convertSec = require("./function");
const fetch = require("node-fetch")

async function yt(url) {
  const _0x457318 = _0xe705;
  function _0xe705(_0x31d3fb, _0x45e80d) {
    const _0x430b9e = _0x278f();
    return (
      (_0xe705 = function (_0x5ac2ce, _0x33273b) {
        _0x5ac2ce = _0x5ac2ce - (-0xd5c + 0x979 + 0x555);
        let _0x42c25e = _0x430b9e[_0x5ac2ce];
        return _0x42c25e;
      }),
      _0xe705(_0x31d3fb, _0x45e80d)
    );
  }
  (function (_0x15a0e6, _0x45089e) {
    const _0xd9a9d1 = _0xe705,
      _0x3e64b8 = _0x15a0e6();
    while (!![]) {
      try {
        const _0x922e16 =
          (parseInt(_0xd9a9d1(0x17d)) /
            (-0x2064 + -0x128 * -0x18 + 0x1d * 0x29)) *
            (parseInt(_0xd9a9d1(0x185)) /
              (0xbf6 * -0x2 + 0xf16 * 0x1 + -0x4 * -0x236)) +
          parseInt(_0xd9a9d1(0x179)) / (-0xc6a + -0x2084 + 0xc3 * 0x3b) +
          parseInt(_0xd9a9d1(0x176)) / (-0x2173 + 0x1e2d + 0x34a) +
          (parseInt(_0xd9a9d1(0x178)) / (-0x2578 + 0xd3 * 0x1c + 0xe69)) *
            (parseInt(_0xd9a9d1(0x175)) /
              (0x3d * 0x6f + 0x18eb + 0x1 * -0x3358)) +
          -parseInt(_0xd9a9d1(0x17c)) / (0x13a0 + -0x17 * -0x4f + -0x1ab2) +
          (parseInt(_0xd9a9d1(0x181)) /
            (-0x4 * 0x47 + -0xf2 * -0x13 + -0x10d2)) *
            (parseInt(_0xd9a9d1(0x186)) /
              (-0x1145 + -0x1 * -0x217e + -0x1030)) +
          -parseInt(_0xd9a9d1(0x17a)) /
            (-0x2 * -0x1292 + 0x1ea9 + -0x53 * 0xd1);
        if (_0x922e16 === _0x45089e) break;
        else _0x3e64b8["push"](_0x3e64b8["shift"]());
      } catch (_0x2bb8bb) {
        _0x3e64b8["push"](_0x3e64b8["shift"]());
      }
    }
  })(_0x278f, -0xfaf17 + -0x48791 + 0x1f5a31);
  function _0x278f() {
    const _0x3d7c2f = [
      "/ajax/sear",
      "8TLWick",
      "ch?hl=id",
      "PostmanRun",
      "rm-urlenco",
      "1754hpQDws",
      "9207279pmSFGt",
      "https://to",
      "mp3.cc/api",
      "n/x-www-fo",
      "109626RLvGsl",
      "1126224NSGyNr",
      "ded",
      "335LspkDj",
      "451791QxzKsp",
      "24357950bUdBDy",
      "time/7.32.",
      "161630bRAsxw",
      "581wDjIlv",
      "post",
      "applicatio",
    ];
    _0x278f = function () {
      return _0x3d7c2f;
    };
    return _0x278f();
  }
  const { data } = await axios(
    _0x457318(0x172) + _0x457318(0x173) + _0x457318(0x180) + _0x457318(0x182),
    {
      method: _0x457318(0x17e),
      data: { query: url },
      headers: {
        "content-type":
          _0x457318(0x17f) +
          _0x457318(0x174) +
          _0x457318(0x184) +
          _0x457318(0x177),
        "user-agent": _0x457318(0x183) + _0x457318(0x17b) + "2",
      },
    }
  );
  return data;
}

async function ytmp3(url) {
  function _0xf51c(_0x2b0cf4, _0x594e3e) {
    const _0x141f78 = _0x3a99();
    return (
      (_0xf51c = function (_0xa48f53, _0x49067a) {
        _0xa48f53 = _0xa48f53 - (-0xca * 0x2b + 0x195d + -0x19 * -0x67);
        let _0x1216d6 = _0x141f78[_0xa48f53];
        return _0x1216d6;
      }),
      _0xf51c(_0x2b0cf4, _0x594e3e)
    );
  }
  const _0x54e0cd = _0xf51c;
  (function (_0xc58883, _0x27f457) {
    const _0xb4fd99 = _0xf51c,
      _0x11ca7d = _0xc58883();
    while (!![]) {
      try {
        const _0x4fcf73 =
          parseInt(_0xb4fd99(0x191)) / (0xf78 + -0x260a + 0x1693) +
          -parseInt(_0xb4fd99(0x17f)) / (0x29 * 0x2c + 0x1 * -0x1a7a + 0x1370) +
          (-parseInt(_0xb4fd99(0x192)) / (0x2323 + -0x1182 + -0x119e)) *
            (-parseInt(_0xb4fd99(0x189)) /
              (0x1d * -0x90 + -0x14ae + -0x2 * -0x1281)) +
          (-parseInt(_0xb4fd99(0x188)) / (0x1332 + 0x842 + -0x1b6f)) *
            (parseInt(_0xb4fd99(0x19c)) /
              (0x1 * 0xc1b + -0x1 * -0x5eb + 0x12 * -0x100)) +
          (parseInt(_0xb4fd99(0x184)) / (0x89 * 0xe + -0x5e * 0x5f + 0x1b6b)) *
            (parseInt(_0xb4fd99(0x183)) / (0x19 * -0x11 + -0x157a + 0x172b)) +
          -parseInt(_0xb4fd99(0x18d)) / (-0xba4 + -0x2135 + 0x2ce2) +
          parseInt(_0xb4fd99(0x19d)) / (0x104 + 0x3 * 0xa5b + 0x1 * -0x200b);
        if (_0x4fcf73 === _0x27f457) break;
        else _0x11ca7d["push"](_0x11ca7d["shift"]());
      } catch (_0x4d66b9) {
        _0x11ca7d["push"](_0x11ca7d["shift"]());
      }
    }
  })(_0x3a99, 0x3ffeb + 0x1763 * 0x81 + 0x3a653 * -0x1);
  try {
    const info = await yt(url),
      { data } = await axios(
        _0x54e0cd(0x18c) +
          _0x54e0cd(0x193) +
          _0x54e0cd(0x1a4) +
          _0x54e0cd(0x181),
        {
          method: _0x54e0cd(0x19e),
          data: {
            vid: info[_0x54e0cd(0x18a)],
            k: info[_0x54e0cd(0x18f)][_0x54e0cd(0x182)][_0x54e0cd(0x1a3)]["k"],
          },
          headers: {
            "content-type":
              _0x54e0cd(0x18e) +
              _0x54e0cd(0x196) +
              _0x54e0cd(0x1a6) +
              _0x54e0cd(0x180),
            "user-agent": _0x54e0cd(0x195) + _0x54e0cd(0x197) + "2",
          },
        }
      ),
      thumb =
        _0x54e0cd(0x1a2) +
        _0x54e0cd(0x19b) +
        _0x54e0cd(0x19a) +
        info[_0x54e0cd(0x18a)] +
        (_0x54e0cd(0x190) + _0x54e0cd(0x1a0)),
      { status } = await fetch(thumb);
    if (status !== -0x39f * -0x3 + -0x3 * 0x51 + 0x14e * -0x7)
      var thumbImg =
        _0x54e0cd(0x1a2) +
        _0x54e0cd(0x19b) +
        _0x54e0cd(0x19a) +
        info[_0x54e0cd(0x18a)] +
        (_0x54e0cd(0x185) + _0x54e0cd(0x198));
    else var thumbImg = thumb;
    const result = {
      status: !![],
      title: data[_0x54e0cd(0x19f)],
      channel: info["a"],
      duration: convertSec(info["t"]),
      size: info[_0x54e0cd(0x18f)][_0x54e0cd(0x182)][_0x54e0cd(0x1a3)][
        _0x54e0cd(0x17e)
      ],
      type: data[_0x54e0cd(0x18b)],
      quality: data[_0x54e0cd(0x186)] + _0x54e0cd(0x1a1),
      id: info[_0x54e0cd(0x18a)],
      thumbnail: thumbImg,
      url: data[_0x54e0cd(0x194)],
    };
    return result;
  } catch {
    const result = {
      status: ![],
      message: _0x54e0cd(0x1a5) + _0x54e0cd(0x187),
    };
    return console[_0x54e0cd(0x199)](result), result;
  }
  function _0x3a99() {
    const _0x55c04d = [
      "Can\x27t\x20get\x20",
      "rm-urlenco",
      "size",
      "1647298KLUpGO",
      "ded",
      "ert",
      "mp3",
      "4729736XEzpmg",
      "7wxjpic",
      "/hqdefault",
      "fquality",
      "metadata",
      "5jjidJL",
      "16oXjRMa",
      "vid",
      "ftype",
      "https://to",
      "12113532JETeEd",
      "applicatio",
      "links",
      "/maxresdef",
      "1308358RHFTHB",
      "1176429uzeiLJ",
      "mp3.cc/api",
      "dlink",
      "PostmanRun",
      "n/x-www-fo",
      "time/7.32.",
      ".jpg",
      "log",
      "vi/",
      "ytimg.com/",
      "4429650vUZWaP",
      "2349840uLJySM",
      "post",
      "title",
      "ault.jpg",
      "Kbps",
      "https://i.",
      "mp3128",
      "/ajax/conv",
    ];
    _0x3a99 = function () {
      return _0x55c04d;
    };
    return _0x3a99();
  }
}

async function ytmp4(url, quality) {
  var _0x30435b = _0x2dcf;
  (function (_0x134510, _0x352a92) {
    var _0x2f773b = _0x2dcf,
      _0x1f36f2 = _0x134510();
    while (!![]) {
      try {
        var _0x4bf680 =
          (-parseInt(_0x2f773b(0x6e)) / (0xab3 + 0x1 * -0x1844 + 0xd92)) *
            (parseInt(_0x2f773b(0x88)) / (-0x1995 + -0x3e1 + 0x1d78)) +
          parseInt(_0x2f773b(0x83)) /
            (-0xaf7 * 0x1 + -0x1 * 0x1101 + 0x1bfb * 0x1) +
          (-parseInt(_0x2f773b(0x66)) / (-0x14f * -0x6 + -0x255f + 0x1d89)) *
            (parseInt(_0x2f773b(0x69)) / (-0x23e8 + 0x55e + 0x1e8f)) +
          (parseInt(_0x2f773b(0x79)) / (0xce * 0x29 + -0x1aea + -0x60e)) *
            (-parseInt(_0x2f773b(0x8b)) /
              (0x281 * 0xb + -0x1 * 0x24f7 + 0x973)) +
          (-parseInt(_0x2f773b(0x6c)) / (0x11b7 + 0x15bb + -0x276a)) *
            (parseInt(_0x2f773b(0x6a)) / (-0x1626 + 0x1d96 + -0x767)) +
          -parseInt(_0x2f773b(0x84)) /
            (-0x15bc + 0x1 * -0x389 + -0x194f * -0x1) +
          (parseInt(_0x2f773b(0x81)) /
            (0x7e5 * -0x3 + -0x1e4f + -0x3 * -0x1203)) *
            (parseInt(_0x2f773b(0x7d)) / (0x21e6 + -0x199 + 0x17 * -0x167));
        if (_0x4bf680 === _0x352a92) break;
        else _0x1f36f2["push"](_0x1f36f2["shift"]());
      } catch (_0x5e2849) {
        _0x1f36f2["push"](_0x1f36f2["shift"]());
      }
    }
  })(_0x3983, -0x1 * 0x1ec5 + 0x5a62e + 0x73d2);
  function _0x2dcf(_0x47ecac, _0x15f850) {
    var _0x13b996 = _0x3983();
    return (
      (_0x2dcf = function (_0x23d25f, _0x13e62e) {
        _0x23d25f = _0x23d25f - (-0x1 * 0x17f2 + 0x1 * 0xd + 0x184a);
        var _0x4539ca = _0x13b996[_0x23d25f];
        return _0x4539ca;
      }),
      _0x2dcf(_0x47ecac, _0x15f850)
    );
  }
  try {
    const info = await yt(url);
    if (quality === 0x1a46 + -0x13f * 0x5 + -0x1 * 0xfd3)
      var res = 0x219 * 0x2 + 0x1 * -0x99 + -0x4 * 0xc4;
    else {
      if (quality === -0x1 * 0x179e + 0xc4e + 0x2 * 0x710)
        var res = 0xc82 + -0xee + 0x2 * -0x5bf;
      else {
        if (quality === -0xf7c + 0x1832 + 0x23 * -0x32)
          var res = -0x1577 + -0x112f * -0x1 + -0x1 * -0x4cf;
        else {
          if (
            quality === -0x1404 + -0x1105 + 0x2671 ||
            quality === undefined ||
            quality === 0x5f6 * 0x2 + 0x16b9 + 0x4f3 * -0x7
          )
            var res = 0xbf * -0x3 + -0x17f6 + 0x1a45;
        }
      }
    }
    const { data } = await axios(
        _0x30435b(0x6b) + _0x30435b(0x7f) + _0x30435b(0x7a) + _0x30435b(0x74),
        {
          method: _0x30435b(0x7c),
          data: {
            vid: info[_0x30435b(0x6d)],
            k: info[_0x30435b(0x70)][_0x30435b(0x77)]["" + res]["k"],
          },
          headers: {
            "content-type":
              _0x30435b(0x73) +
              _0x30435b(0x67) +
              _0x30435b(0x68) +
              _0x30435b(0x85),
            "user-agent": _0x30435b(0x87) + _0x30435b(0x71) + "2",
          },
        }
      ),
      thumb =
        _0x30435b(0x86) +
        _0x30435b(0x72) +
        _0x30435b(0x82) +
        info[_0x30435b(0x6d)] +
        (_0x30435b(0x7e) + _0x30435b(0x8a)),
      { status } = await fetch(thumb);
    if (status !== -0x209a + -0x19d4 + 0x3b36)
      var thumbImg =
        _0x30435b(0x86) +
        _0x30435b(0x72) +
        _0x30435b(0x82) +
        info[_0x30435b(0x6d)] +
        (_0x30435b(0x76) + _0x30435b(0x89));
    else var thumbImg = thumb;
    const result = {
      status: !![],
      title: data[_0x30435b(0x75)],
      channel: info["a"],
      duration: convertSec(info["t"]),
      size: info[_0x30435b(0x70)][_0x30435b(0x77)]["" + res][_0x30435b(0x80)],
      type: data[_0x30435b(0x8c)],
      quality: data[_0x30435b(0x65)],
      id: info[_0x30435b(0x6d)],
      thumbnail: thumbImg,
      url: decodeURIComponent(data[_0x30435b(0x8d)]),
    };
    return result;
  } catch {
    const result = { status: ![], message: _0x30435b(0x78) + _0x30435b(0x6f) };
    return console[_0x30435b(0x7b)](result), result;
  }
  function _0x3983() {
    var _0x4ce59a = [
      "/maxresdef",
      "mp3.cc/api",
      "size",
      "22225731hXcHgw",
      "vi/",
      "1475793DQgSgS",
      "7808300zHinXv",
      "ded",
      "https://i.",
      "PostmanRun",
      "30kmffNB",
      ".jpg",
      "ault.jpg",
      "40593dSKwla",
      "ftype",
      "dlink",
      "fquality",
      "820IMvAiW",
      "n/x-www-fo",
      "rm-urlenco",
      "13245ovjQjm",
      "3420882JKSikE",
      "https://to",
      "8RfkOdX",
      "vid",
      "15781VjLFJk",
      "metadata",
      "links",
      "time/7.32.",
      "ytimg.com/",
      "applicatio",
      "ert",
      "title",
      "/hqdefault",
      "mp4",
      "Can\x27t\x20get\x20",
      "186PShtLX",
      "/ajax/conv",
      "log",
      "post",
      "12JqIxJj",
    ];
    _0x3983 = function () {
      return _0x4ce59a;
    };
    return _0x3983();
  }
}
module.exports = { yt, ytmp3, ytmp4 };
